<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Word Guess</title>
<link href="https://fonts.googleapis.com/css2?family=Comfortaa&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Comfortaa', cursive;
    margin: 0;
    height: 100vh;
    background: linear-gradient(to bottom, #1e3c72, #2a5298);
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .card {
    position: relative;
    background: white;
    border-radius: 20px;
    padding: 30px 40px 40px 40px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    text-align: center;
    min-width: 350px;
    max-width: 500px;
    transition: transform 0.2s;
  }

  .card:hover { transform: scale(1.02); }
  h1, h2, h3 { color: #003366; margin-bottom: 20px; }
  input {
    width: 85%;
    padding: 12px;
    margin: 12px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 16px;
    font-family: 'Comfortaa', cursive;
    transition: 0.2s;
  }
  input:focus { border-color: #007BFF; box-shadow: 0 0 5px rgba(0,123,255,0.5); outline: none; }
  button {
    padding: 12px 25px;
    margin-top: 15px;
    border-radius: 8px;
    border: none;
    font-family: 'Comfortaa', cursive;
    font-size: 16px;
    background-color: #007BFF;
    color: white;
    cursor: pointer;
    transition: 0.2s;
  }
  button:hover { background-color: #0056b3; }
  .red-button {
    background-color: #FF4C4C;
    position: absolute;
    top: 15px;
    left: 15px;
    padding: 8px 15px;
    border-radius: 8px;
  }
  .red-button:hover { background-color: #cc0000; }
  .hidden { display: none; }
  .streak { font-size: 24px; margin-bottom: 20px; color: #ff4500; }
  .hint-container { margin: 15px 0; }
  .hint, .extra-hint { font-size: 16px; color: #333; }
  .extra-hint { margin-top: 8px; font-style: italic; color: #007BFF; }
  .result { margin-top: 15px; font-weight: bold; font-size: 20px; transition: 0.5s; }
  .correct { color: green; text-shadow: 0 0 10px #00ff00; animation: glow 0.7s ease-in-out; }
  @keyframes glow { 0% { text-shadow:0 0 0 #00ff00;} 50%{text-shadow:0 0 15px #00ff00;} 100%{text-shadow:0 0 0 #00ff00;} }
</style>
</head>
<body>

<!-- Login / Sign Up -->
<div id="authPage" class="card">
  <h1>Word Guess üî•</h1>
  <h3>Sign Up / Log In</h3>
  <input type="text" id="usernameInput" placeholder="Enter username">
  <input type="password" id="passwordInput" placeholder="Enter password">
  <button id="signupBtn">Sign Up / Log In</button>
</div>

<!-- Main Menu -->
<div id="mainMenu" class="card hidden">
  <div class="streak">üî• Daily Streak: <span id="streakCount">0</span></div>
  <button id="startGameBtn">START</button>
  <button id="settingsBtn">Settings ‚öôÔ∏è</button>
</div>

<!-- Settings Page -->
<div id="settingsPage" class="card hidden">
  <button class="red-button" id="settingsBackBtn">Back</button>
  <h2>Settings</h2>
  <button id="resetStreakBtn">Reset Streak</button>
</div>

<!-- Game Page -->
<div id="gamePage" class="card hidden">
  <button class="red-button" id="leaveMenuBtn">Leave</button>
  <h2>Guess the Word</h2>
  <div class="hint-container">
    Hint: <span id="hint"></span>
    <div class="extra-hint" id="extraHint"></div>
  </div>
  <input type="text" id="guessInput" placeholder="Your guess">
  <button id="submitGuessBtn">Submit</button>
  <div class="result" id="result"></div>
</div>

<script>
  const authPage = document.getElementById("authPage");
  const mainMenu = document.getElementById("mainMenu");
  const settingsPage = document.getElementById("settingsPage");
  const gamePage = document.getElementById("gamePage");
  const streakCount = document.getElementById("streakCount");
  const extraHintDiv = document.getElementById("extraHint");

  const usernameInput = document.getElementById("usernameInput");
  const passwordInput = document.getElementById("passwordInput");

  const words = [
    {word: "apple", hint: "A fruit", extra: "It can be red, green, or yellow"},
    {word: "banana", hint: "Yellow fruit", extra: "Monkeys love it"},
    {word: "orange", hint: "Citrus fruit", extra: "Its color matches its name"},
    {word: "guitar", hint: "Musical instrument", extra: "It has strings"},
    {word: "bridge", hint: "Connects two points", extra: "You drive over it"},
    {word: "python", hint: "Programming language", extra: "Named after a comedy group"},
    {word: "castle", hint: "Medieval building", extra: "Kings and queens live here"},
    {word: "planet", hint: "Orbits a star", extra: "Earth is one of them"}
  ];

  let currentWord = null;
  let attemptCount = 0;
  let consecutiveCorrect = 0;
  let resetConfirm = false;

  function getUsers() { return JSON.parse(localStorage.getItem("users") || "{}"); }
  function saveUsers(users) { localStorage.setItem("users", JSON.stringify(users)); }
  function getCurrentUser() { return JSON.parse(localStorage.getItem("currentUser") || "null"); }
  function saveCurrentUser(user) { localStorage.setItem("currentUser", JSON.stringify(user)); }

  function checkDailyStreak(user) {
    const today = new Date().toDateString();
    if (user.lastPlayedDay !== today) {
      if (user.lastPlayedDay && consecutiveCorrect < 5) {
        user.streak = 0;
        alert("Streak Reset!");
      }
      user.lastPlayedDay = today;
      consecutiveCorrect = 0;
    }
    return user;
  }

  // --- Sign Up / Log In ---
  document.getElementById("signupBtn").addEventListener("click", () => {
    const username = usernameInput.value.trim();
    const password = passwordInput.value.trim();
    if (!username || !password) return alert("Enter username and password!");
    let users = getUsers();
    let user;
    if (users[username]) {
      if (users[username].password === password) {
        user = users[username];
        alert("Logged in!");
      } else return alert("Wrong password!");
    } else {
      user = {username, password, streak: 0, lastPlayedDay: ""};
      users[username] = user;
      alert("Account created!");
    }
    user = checkDailyStreak(user);
    saveUsers(users);
    saveCurrentUser(user);
    streakCount.textContent = user.streak;
    authPage.classList.add("hidden");
    mainMenu.classList.remove("hidden");
  });

  // --- Main Menu Buttons ---
  document.getElementById("startGameBtn").addEventListener("click", () => {
    mainMenu.classList.add("hidden");
    gamePage.classList.remove("hidden");
    loadNewWord();
  });

  document.getElementById("settingsBtn").addEventListener("click", () => {
    mainMenu.classList.add("hidden");
    settingsPage.classList.remove("hidden");
  });

  document.getElementById("settingsBackBtn").addEventListener("click", () => {
    settingsPage.classList.add("hidden");
    mainMenu.classList.remove("hidden");
    resetConfirm = false;
    document.getElementById("resetStreakBtn").textContent = "Reset Streak";
  });

  // --- Reset Streak ---
  document.getElementById("resetStreakBtn").addEventListener("click", () => {
    if (!resetConfirm) {
      document.getElementById("resetStreakBtn").textContent = "Are you sure? Click again to confirm";
      resetConfirm = true;
    } else {
      const user = getCurrentUser();
      user.streak = 0;
      consecutiveCorrect = 0;
      saveCurrentUser(user);
      let users = getUsers();
      users[user.username] = user;
      saveUsers(users);
      streakCount.textContent = 0;
      alert("Streak reset!");
      resetConfirm = false;
      document.getElementById("resetStreakBtn").textContent = "Reset Streak";
    }
  });

  // --- Game Functions ---
  function loadNewWord() {
    attemptCount = 0;
    currentWord = words[Math.floor(Math.random() * words.length)];
    document.getElementById("hint").textContent = currentWord.hint;
    extraHintDiv.textContent = "Extra hint: " + currentWord.extra;
    document.getElementById("guessInput").value = "";
    document.getElementById("result").textContent = "";
  }

  function wordFailed() {
    consecutiveCorrect = 0;
    loadNewWord();
  }

  function wordCorrect() {
    consecutiveCorrect++;
    if (consecutiveCorrect >= 5) {
      const user = getCurrentUser();
      user.streak++;
      alert("Streak Updated!");
      consecutiveCorrect = 0;
      user.lastPlayedDay = new Date().toDateString();
      saveCurrentUser(user);
      let users = getUsers();
      users[user.username] = user;
      saveUsers(users);
      streakCount.textContent = user.streak;
      gamePage.classList.add("hidden");
      mainMenu.classList.remove("hidden");
      return;
    }
    loadNewWord();
  }

  document.getElementById("submitGuessBtn").addEventListener("click", () => {
    const guess = document.getElementById("guessInput").value.trim().toLowerCase();
    if (!guess) return;
    attemptCount++;
    const resultDiv = document.getElementById("result");

    if (guess === currentWord.word.toLowerCase()) {
      resultDiv.textContent = "CORRECT!";
      resultDiv.classList.add("correct");
      setTimeout(() => resultDiv.classList.remove("correct"), 1500);
      wordCorrect();
    } else {
      if (attemptCount >= 5) {
        resultDiv.textContent = "Too many attempts! Answer: " + currentWord.word;
        wordFailed();
      } else {
        resultDiv.textContent = `Try Again! (${attemptCount}/5)`;
        resultDiv.classList.remove("correct");
      }
    }
  });

  document.getElementById("leaveMenuBtn").addEventListener("click", () => {
    gamePage.classList.add("hidden");
    mainMenu.classList.remove("hidden");
  });

</script>
</body>
</html>
